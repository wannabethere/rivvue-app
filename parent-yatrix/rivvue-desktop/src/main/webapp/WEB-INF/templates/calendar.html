<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head th:fragment="header">
<meta charset='utf-8' />
<link href='./resources/css/fullcalendar.css' th:href="@{/resources/css/fullcalendar.css}" rel='stylesheet' />
<link href='./resources/css/fullcalendar.print.css' th:href="@{/resources/css/fullcalendar.print.css}" rel='stylesheet'	media='print' />
<link href="./resources/css/stylesheet.css" rel="stylesheet" type="text/css" th:href="@{/resources/css/stylesheet.css}" />
<script type="text/javascript" th:src="@{/resources/lib/jquery.min.js}" th:href="@{/resources/js/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/lib/moment.min.js}"	th:href="@{/resources/lib/moment.min.js}"></script>
<script type="text/javascript"	th:src="@{/resources/lib/jquery-ui.custom.min.js}" th:href="@{/resources/lib/jquery-ui.custom.min.js}"></script>
<script type="text/javascript" th:src="@{/resources/js/fullcalendar.min.js}" th:href="@{/resources/js/fullcalendar.min.js}"></script>
<script>

	$(document).ready(function() {
	
	
		/* initialize the external events
		-----------------------------------------------------------------*/
	
		$('#external-events div.external-event').each(function() {
		
			// create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
			// it doesn't need to have a start or end
			var eventObject = {
				title: $.trim($(this).text()) // use the element's text as the event title
			};
			
			// store the Event Object in the DOM element so we can get to it later
			$(this).data('eventObject', 'events: [{id:40,title:"test four",services:"Reflexology (40), foot-soak",start:"Mon Apr 21 2014 13:00:00",end:"Mon Apr 21 2014 13:40:00",color:"#e56b15",customerId:21,phone:"555-0404",email:"test4",notes:"test two of update. this sentence added at update.",seat:"Side Couch 9",vip:"yes",confirmed:"yes",knows_policies:"yes",customer_here:0,allDay:false},{id:41,title:"test four",services:"Foot-Soak, ",start:"Wed Mar 27 2013 19:00:00",end:"Wed Mar 27 2013 19:15:00",color:"#e56b15",customerId:21,phone:"555-0404",email:"test4",notes:"test of addslashes. what\'s going to happen?",seat:"Front Chair 2",vip:"yes",confirmed:"yes",knows_policies:"yes",customer_here:0,allDay:false}]');
			
			// make the event draggable using jQuery UI
			$(this).draggable({
				zIndex: 999,
				revert: true,      // will cause the event to go back to its
				revertDuration: 0  //  original position after the drag
			});
			
		});
	
	
		/* initialize the calendar
		-----------------------------------------------------------------*/
		
		$('#calendar').fullCalendar({
			header: {
				left: 'prev,next today',
				center: 'title',
				right: 'month,agendaWeek,agendaDay'
			},
			defaultDate: '2014-01-12',
			editable: true,
			droppable: true, // this allows things to be dropped onto the calendar !!!
			drop: function(date) { // this function is called when something is dropped
			
				// retrieve the dropped element's stored Event Object
				var originalEventObject = $(this).data('eventObject');
				
				// we need to copy it, so that multiple events don't have a reference to the same object
				var copiedEventObject = $.extend({}, originalEventObject);
				
				// assign it the date that was reported
				copiedEventObject.start = date;
				
				// render the event on the calendar
				// the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
				$('#calendar').fullCalendar('renderEvent', copiedEventObject, true);
				
				// is the "remove after drop" checkbox checked?
				if ($('#drop-remove').is(':checked')) {
					// if so, remove the element from the "Draggable Events" list
					$(this).remove();
				}
				
			}
		});
		
		
	});

</script>
<script type="text/javascript">
	function addFriendFn(friendId, srcProfileType) {
		var username = $('#loggedInUser').val();
		var url = "../events/" + username + "/addFriend";
		var param = {
			"profileType" : srcProfileType,
			"id" : friendId
		};

		$.ajax({
			url : url,
			dataType : "json",
			type : 'POST',
			data : param,
			success : function(data) {
				alert('Added successfully' + data);
			}
		});
	}
</script>
<style>
#wrap {
	width: 1000px;
	margin: 0 auto;
}

#external-events {
	float: left;
	width: 150px;
	padding: 0 10px;
	border: 1px solid #ccc;
	background: #eee;
	text-align: left;
}

#external-events h4 {
	font-size: 16px;
	margin-top: 0;
	padding-top: 1em;
}

.external-event { /* try to mimick the look of a real event */
	margin: 10px 0;
	padding: 2px 4px;
	background: #3366CC;
	color: #fff;
	font-size: .85em;
	cursor: pointer;
}

#external-events p {
	margin: 1.5em 0;
	font-size: 11px;
	color: #666;
}

#external-events p input {
	margin: 0;
	vertical-align: middle;
}

#calendar {
	float: right;
	width: 900px;
}
</style>
</head>
<body>
	<header th:include="include :: signedHeader"> </header>
	<div id="content1">
		<!--topmenu start-->
		<div class="topmenu" th:include="include :: topmenu"></div>
	
		<div id='calendar'></div>
		
	</div>
	<footer th:include="include :: footer"> </footer>
</body>
</html>
